<html>
<head>
    <meta http-equiv="content-type" content="">
</head>

<body lang="en">
<h2>Welcome to MSB-Java version 1.6.6</h2>

<h3>November 7, 2018</h3>

<pre>
Changes in MSB-Java version 1.6.6:
   - Updated AMQP client version from 5.2.0 to 5.4.0; 
   - Updated java.lang.Error handling with auto-retry if auto-acknowledgement is enabled;
   - Added 'msb-config.enabled' disable msb-java using property for testing purposes;

Changes in MSB-Java version 1.6.5:
   - Updated AMQP client version from 3.6.0 to 5.2.0; 
   - Added check consumer connection isConnected() method;
   - Upgraded msb-spring-boot-starter to Spring Boot 2 release;

Changes in MSB-Java version 1.6.4:
   - Exposed Message Count Metric for ResponderServer

Changes in MSB-Java version 1.6.3:
   - Added separate TRACE level log record when message body was put to error;
   - Extended AcknowledgementHandler interface with retryMessageFirstTime() method. Message should be requeued only
     if it was not delivered before;
     
Changes in MSB-Java version 1.6.2:
   - Manual message retry is not limited to a single attempt anymore. It is completely up to client code to decide 
     when message should not be retried anymore;
   - Restored CLI tool. Supported 'fanout' and 'topic' exchange types;
   - Full message logging was replaced with separated TRACE level message logging;

Features of MSB-Java version 1.6.1:
   - Improved message processing during context shutdown;
   - Improved AMQP exception handling and channel automatic recovery;
   - Removed JBehave tests as deprecated;
   
Features of MSB-Java version 1.6.0:
   - Broken backward compatibility with 1.5.2 version. Now exchange type for AMQ is not determined by routing key
     presence/absence. It can be set explicitly using AmqpRequestOptions. Default value 'fanout' is used if exchange
     type is not specified. ResponderServer mirrors this behavior using AmqpResponderOptions (see examples for routing key);
   - Fixed possible deadlock in AMQP channel automatic recovery logic;
   - Added Spring Boot auto-configuration spring-boot-starter module;
   - MSB_BROKER_VIRTUAL_HOST environment variable was deprecated. MSB_BROKER_AMQP_VHOST environment variable is used for 
     RabbitMQ Virutal host specification. The both variable are supported now. Deprecated will be removed in next release;
   - Removed ChannelMonitorAgent and ChannelMonitorAggregator;
   - Removed CLI module.

Features of MSB-Java version 1.5.2:
   - Added routing key support to API and AMQP adapter;
   - Added "routingKey" field to message envelope "topics" section;
   - Removed confusing response topic for cases when no responses/acks are expected.

Features of MSB-Java version 1.5.1:
   - Added stop() method to ResponderServer;
   - Add request object and map into MsbThreadContext;
   - Fixed broken graceful shutdown of TimeoutManager on MsbContextImpl shutdown.

Features of MSB-Java version 1.5.0:
   - Multithreading settings parameters consumerThreadPoolSize, consumerThreadPoolQueueCapacity moved
     from "brokerConfig" to "threadingConfig" config section;
   - Now it is possible to process a group of messages in a single-threaded mode using
     MsbContextBuilder.withMessageGroupStrategy();
   - Added Requester.request() method that is similar to Requester.publish() but expects exactly 
     one response and returns CompletableFuture.

Features of MSB-Java version 1.4.6:
   - Updated messages schema validation;
   - Fixed issue with unresolved host name;
   - Replaced Rest like response on incorrect structure request with zero Ack; 
   - Added custom error handler for messages parsing or schema validation errors;
   - Added MsbThreadContext to support flows that involve multiple conversations between microservices.
   
Features of MSB-Java version 1.4.4:
   - MsbContext shutdown callbacks support;
   - Incoming messages schema validation is disabled by default;
   - AMQP default heartbeat interval increased to 30s;
   - Performance improvements;
   - MSB mocking support included, see MSB-TEST-MOCKING.md for details.

Features of MSB-Java version 1.4.3:
   - Added logging support: all message tags concatenated into one string can be added to consumers thread
     MDC (see http://www.slf4j.org/api/org/slf4j/MDC.html) in 'msbTags' field. Message tags that have key-value format
     (e.g. 'requestId:123456' or 'requestId-123456') can be added to consumers thread MDC as separate properties where
     part before delimiter is a key and part after delimiter is a value. Delimiter is configurable. MDC is cleared
     after message handler invocation return;
   - it is possible to define a messages forwarding namespace (added topics.forward field to the msb envelope);
   - Requester API now allows to publish message with multiple tags.

Features of MSB-Java version 1.4.2:
   - the library uses only slf4j API for logging
     so log4j dependency is no longer included;
   - logback dependency is included for testing only;
   - dependencies updates.

Features of MSB-Java version 1.4.0:
   - Added prefetch count for AMQP adapter
     (for details see https://www.rabbitmq.com/consumer-prefetch.html);
   - Implemented explicit confirm/reject delivered messages;
   - Fixed an issue when `onEnd` callback could be invoked by timeout while not all incoming responses are processed yet;
   - Fixed an issue when time-consuming `onResponse` callbacks could block incoming responses processing;
   - Acceptance testing is enabled by default during a build.

Features of MSB-Java version 1.3.0:
   - Removed REST-style payload constraint on parameters type;
   - Updated Requester behavior. It waits for acks even if configured to
     `waitForResponses: 0`.

    </pre>
</body>
</html>